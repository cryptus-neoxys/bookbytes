# ==============================================================================
# BookBytes Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in the values for your environment.
# Never commit .env to version control!
# ==============================================================================

# ==============================================================================
# APPLICATION
# ==============================================================================
# Environment: development, staging, production
APP_ENV=development

# Enable debug mode (additional logging, stack traces in responses)
DEBUG=true

# Application name (shown in logs and API docs)
APP_NAME=BookBytes

# Application version
APP_VERSION=0.1.0

# ==============================================================================
# LOGGING
# ==============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json (production) or console (development)
LOG_FORMAT=console

# ==============================================================================
# SERVER
# ==============================================================================
# Server bind address
HOST=0.0.0.0

# Server port
PORT=8000

# ==============================================================================
# DATABASE
# ==============================================================================
# PostgreSQL connection URL with async driver
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://bookbytes:bookbytes@localhost:5432/bookbytes

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ==============================================================================
# REDIS
# ==============================================================================
# Redis connection URL for background jobs and caching
# Format: redis://host:port/db
REDIS_URL=redis://localhost:6379/0

# ==============================================================================
# STORAGE
# ==============================================================================
# Storage backend: local (filesystem) or s3 (AWS S3)
STORAGE_BACKEND=local

# Local storage path (used when STORAGE_BACKEND=local)
LOCAL_STORAGE_PATH=./data/audio

# S3 configuration (used when STORAGE_BACKEND=s3)
S3_BUCKET=bookbytes-audio
S3_REGION=us-east-1

# AWS credentials (optional if using IAM roles)
# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key

# S3 pre-signed URL expiry in seconds (0 = public/no expiry)
S3_URL_EXPIRY_SECONDS=0

# ==============================================================================
# EXTERNAL APIS
# ==============================================================================
# OpenAI API key for chapter extraction and summary generation
# Get your key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key

# OpenAI model to use (gpt-3.5-turbo, gpt-4, etc.)
OPENAI_MODEL=gpt-4o-mini

# OpenAI request timeout in seconds
OPENAI_TIMEOUT=30

# ==============================================================================
# AUTHENTICATION
# ==============================================================================
# Auth mode: jwt (production) or api_key (local development bypass)
AUTH_MODE=api_key

# JWT secret key for token signing
# IMPORTANT: Change this in production! Use a secure random string.
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=dev-secret-key-change-in-production

# JWT algorithm (HS256, HS384, HS512)
JWT_ALGORITHM=HS256

# JWT access token expiry in minutes
JWT_EXPIRE_MINUTES=30

# API key for local development (used when AUTH_MODE=api_key)
# Include this in requests as X-API-Key header
API_KEY=dev-api-key-12345

# ==============================================================================
# WORKER
# ==============================================================================
# Maximum concurrent jobs per worker
WORKER_MAX_JOBS=5

# Job timeout in seconds (default 10 minutes for book processing)
WORKER_JOB_TIMEOUT=600
